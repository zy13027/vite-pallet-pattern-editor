<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/svg+xml" href="/LPallPatt.svg" />
  <title>Siemens Pallet Editor</title>
</head>
<body>
<div id="app">
  <div class="layout">
    <!-- Main Editor Area -->
    <div class="main-col">
      <div class="topbar row">
        <div class="group">
          <label>Pallet W (mm) <input id="palletW" type="number" value="1200"></label>
          <label>Pallet L (mm) <input id="palletL" type="number" value="800"></label>
          <label>Grid (mm) <input id="grid" type="number" value="20"></label>
        </div>
        <div class="group">
          <label>Prod W (mm) <input id="prodW" type="number" value="300"></label>
          <label>Prod L (mm) <input id="prodL" type="number" value="200"></label>
          <label>Prod H (mm) <input id="prodH" type="number" value="200"></label>
          <label>Layers <input id="numLayers" type="number" value="1"></label>
          <button id="btnAdd">Add Box</button>
        </div>
        <div class="group">
          <button id="btnRotate">Rotate</button>
          <button id="btnDelete">Delete</button>
          <button id="btnFit">Fit View</button>
          <button id="btnClear">Clear</button>
        </div>
      </div>

      <div class="canvasWrap">
        <canvas id="c"></canvas>
        <div id="status" class="status">Ready</div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="side">
      <h3>PLC Communication</h3>
      <div class="group grow" style="display:block; margin-bottom:10px;">
        <div class="hint">Target DB: "GDB_Palletizing"</div>
        <div class="hint">Status: <span id="plcStatus" style="font-weight:bold">Not Connected</span></div>
      </div>

      <div class="sideButtons">
        <button id="btnPlcLogin" style="width:100%">Login PLC</button>
        <button id="btnPlcWrite" disabled style="width:100%">Write Pattern</button>
        <button id="btnPlcRead" style="width:100%">Read Pattern</button>
      </div>

      <hr style="width:100%; border:0; border-top:1px solid var(--line); margin: 15px 0;">

      <h3>Recipe JSON</h3>
      <div class="sideButtons">
        <button id="btnExport">Export</button>
        <button id="btnImport">Import</button>
      </div>
      <textarea id="json" spellcheck="false"></textarea>
    </div>
  </div>
</div>

<!-- Login Dialog (Hidden by default) -->
<dialog id="loginDialog">
  <form method="dialog">
    <h3>PLC Login</h3>
    <div style="display:flex; flex-direction:column; gap:10px; margin-bottom:15px;">
      <label>
        Username
        <input type="text" id="plcUser" value="Admin" style="width:100%">
      </label>
      <label>
        Password
        <input type="password" id="plcPass" value="12345678" style="width:100%">
      </label>
    </div>
    <div style="display:flex; justify-content:flex-end; gap:10px;">
      <button type="button" onclick="document.getElementById('loginDialog').close()">Cancel</button>
      <button id="btnDoLogin">Login</button>
    </div>
  </form>
</dialog>

<script type="module" src="/src/main.ts"></script>
</body>
</html>